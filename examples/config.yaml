# BLE Studio 仿真配置文件
# 修改此文件后运行 demo.py 即可
#
# 数据流架构:
#   BLE TX → [信道入口] → 信道模型 → [信道出口] → BLE RX
#
# - 信道入口: 可导入外部 IQ 数据替代 TX 输出
# - 信道出口: 可导出 IQ 数据 (txt/mat) 供外部使用

# 仿真模式: advertising (广播包) 或 rf_test/dtm (射频测试)
mode: "rf_test"

# 发送端配置 (广播模式使用)
tx:
  # 广播地址 (6字节, 十六进制)
  adv_address: "11:22:33:44:55:66"
  # 广播数据 (十六进制字符串)
  adv_data: "0201060908424c455374756469"
  # 广播信道 (37, 38, 39)
  channel: 37

# RF Test 配置 (DTM模式使用)
rf_test:
  # 负载类型:
  #   PRBS9 - PRBS9 伪随机序列
  #   PRBS15 - PRBS15 伪随机序列
  #   PATTERN_11110000 - 0xF0 重复
  #   PATTERN_10101010 - 0x55 重复
  #   PATTERN_11111111 - 0xFF 全1
  #   PATTERN_00000000 - 0x00 全0
  #   PATTERN_00001111 - 0x0F 重复
  #   PATTERN_01010101 - 0xAA 重复
  payload_type: "PATTERN_10101010"
  # 负载长度 (0-255 bytes)
  payload_length: 37
  # 测试信道 (0-39)
  channel: 0
  # 白化开关 (true=开启, false=关闭, DTM 标准模式应关闭)
  whitening: false

# 调制参数
modulation:
  # PHY 模式: LE_1M, LE_2M, LE_CODED_S2, LE_CODED_S8
  phy_mode: "LE_1M"
  # 采样率 (Hz)
  sample_rate: 8.0e6
  # 调制指数 (0.45-0.55)
  modulation_index: 0.5
  # 高斯滤波器 BT 积
  bt: 0.5

# 信道参数
channel:
  # 信噪比 (dB) - 建议 >= 12 dB 以保证稳定解调
  snr_db: 15
  # 载波频偏 (Hz)
  freq_offset: 50.0e3

# ============================================================
# 信道入口配置 - 导入外部 IQ 数据替代 TX 输出
# ============================================================
channel_input:
  # 是否启用 (设为 true 则使用外部 IQ 数据)
  enabled: false
  # 导入文件路径
  file: ""
  # 文件类型: auto (自动判断), txt, mat
  file_type: "auto"
  # ---------- TXT 文件配置 ----------
  # 量化位宽
  bit_width: 12
  # Q 格式小数位数
  frac_bits: 0
  # IQ 格式: two_column, interleaved, separate
  iq_format: "two_column"
  # 数值格式: signed, unsigned, hex, float
  number_format: "signed"
  # 跳过的行数 (头部注释)
  skip_lines: 0
  # ---------- MAT 文件配置 ----------
  mat_i_var: "I"
  mat_q_var: "Q"
  mat_complex_var: ""  # 复数变量名 (如 "iq")

# ============================================================
# 信道出口配置 - 导出 IQ 数据
# ============================================================
channel_output:
  # 是否启用导出
  enabled: true
  # 量化位宽
  bit_width: 12
  # Q 格式小数位数
  frac_bits: 0
  # IQ 格式: two_column, interleaved, separate
  iq_format: "two_column"
  # 数值格式: signed, unsigned, hex
  number_format: "signed"
  # 是否缩放到满量程 (true=根据信号幅度自动缩放, false=假设输入已归一化)
  scale_to_full: true
  # 是否添加文件头注释
  add_header: true
  # ---------- 导出格式选择 ----------
  # 导出 TXT 文件
  export_txt: true
  # 导出 MATLAB .mat 文件
  export_mat: true
  # 导出 Verilog $readmemh 格式 (MATLAB 兼容: IIIQQQ)
  export_verilog: true
  # 导出分离的 I/Q 文件
  export_separate: false
  # 同时导出 TX 理想信号
  export_tx: true

# 输出配置
output:
  # 输出目录
  dir: "results"
  # 生成 HTML 报告
  html_report: true
  # 生成图表页面
  html_charts: true
  # 图表主题: default (白底), dark (深灰底), instrument (黑底亮色)
  theme: "instrument"
